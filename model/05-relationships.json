{
  "version": "1.0",
  "description": "Cross-layer and within-layer relationships — all tempIds use logical names defined in earlier files",
  "changes": [
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "cap-automation",
      "targetId": "vs-arch-code",
      "tempId": "rel-cap-auto-vs",
      "documentation": "Model Automation capability realises the Architecture-as-Code value stream by enabling programmatic creation and modification of ArchiMate elements."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "cap-access",
      "targetId": "vs-arch-code",
      "tempId": "rel-cap-access-vs",
      "documentation": "Programmatic Model Access capability realises the Architecture-as-Code value stream by exposing model state for validation and query stages."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "cap-integration",
      "targetId": "vs-arch-code",
      "documentation": "Tool Integration capability realises the Architecture-as-Code value stream by enabling external tools and CI/CD pipelines to participate in the workflow."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "cap-governance",
      "targetId": "vs-arch-code",
      "documentation": "Change Governance capability underpins the Architecture-as-Code value stream by ensuring all applied changes are auditable and reversible."
    },
    {
      "op": "createRelationship",
      "type": "assignment-relationship",
      "sourceId": "actor-architect",
      "targetId": "role-consumer",
      "tempId": "rel-actor-arch-role",
      "documentation": "Enterprise Architect fills the API Consumer role when interacting with the server via CLI or scripting."
    },
    {
      "op": "createRelationship",
      "type": "assignment-relationship",
      "sourceId": "actor-agent",
      "targetId": "role-consumer",
      "tempId": "rel-actor-agent-role",
      "documentation": "AI Coding Agent fills the API Consumer role when autonomously querying and modifying the model."
    },
    {
      "op": "createRelationship",
      "type": "assignment-relationship",
      "sourceId": "role-consumer",
      "targetId": "proc-apply",
      "documentation": "API Consumer role performs the Apply Model Changes process."
    },
    {
      "op": "createRelationship",
      "type": "assignment-relationship",
      "sourceId": "role-consumer",
      "targetId": "proc-query",
      "documentation": "API Consumer role performs the Query Model process."
    },
    {
      "op": "createRelationship",
      "type": "assignment-relationship",
      "sourceId": "role-consumer",
      "targetId": "proc-views",
      "documentation": "API Consumer role performs the Manage Views process."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "proc-apply",
      "targetId": "svc-model",
      "tempId": "rel-proc-apply-svc",
      "documentation": "Apply Model Changes process realises the Model API Service by delivering the mutation capability."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "proc-query",
      "targetId": "svc-model",
      "documentation": "Query Model process realises the Model API Service by delivering the read capability."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "proc-views",
      "targetId": "svc-view",
      "documentation": "Manage Views process realises the View Management Service."
    },
    {
      "op": "createRelationship",
      "type": "access-relationship",
      "sourceId": "proc-apply",
      "targetId": "obj-model",
      "documentation": "Apply Model Changes process writes to the ArchiMate Model."
    },
    {
      "op": "createRelationship",
      "type": "access-relationship",
      "sourceId": "proc-query",
      "targetId": "obj-model",
      "documentation": "Query Model process reads from the ArchiMate Model."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-model-ep",
      "targetId": "svc-model",
      "tempId": "rel-model-ep-svc",
      "documentation": "Model Endpoints application component serves the Model API Service, providing the HTTP implementation."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-view-ep",
      "targetId": "svc-view",
      "tempId": "rel-view-ep-svc",
      "documentation": "View Endpoints application component serves the View Management Service."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-server",
      "targetId": "comp-core",
      "tempId": "rel-server-core",
      "documentation": "Model API Server is composed of Server Core for HTTP handling."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-server",
      "targetId": "comp-config",
      "documentation": "Model API Server is composed of Server Configuration."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-server",
      "targetId": "comp-op-queue",
      "documentation": "Model API Server is composed of the Operation Queue for async processing."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-server",
      "targetId": "comp-endpoints",
      "documentation": "Model API Server is composed of the API Endpoints Facade."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-endpoints",
      "targetId": "comp-model-ep",
      "documentation": "API Endpoints Facade is composed of Model Endpoints."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-endpoints",
      "targetId": "comp-view-ep",
      "documentation": "API Endpoints Facade is composed of View Endpoints."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-endpoints",
      "targetId": "comp-op-ep",
      "documentation": "API Endpoints Facade is composed of Operation Endpoints."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "comp-endpoints",
      "targetId": "comp-health-ep",
      "documentation": "API Endpoints Facade is composed of Health Endpoints."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-model-ep",
      "targetId": "comp-undoable",
      "documentation": "Model Endpoints use Undoable Commands to execute all write operations."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-model-ep",
      "targetId": "comp-validation",
      "documentation": "Model Endpoints invoke Operation Validation before executing any batch."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-model-ep",
      "targetId": "comp-snapshot",
      "documentation": "Model Endpoints use Model Snapshot for efficient query serialisation."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-model-ep",
      "targetId": "comp-op-queue",
      "documentation": "Model Endpoints submit async operations to the Operation Queue."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-view-ep",
      "targetId": "comp-undoable",
      "documentation": "View Endpoints use Undoable Commands for all view mutations."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-view-ep",
      "targetId": "comp-layout",
      "documentation": "View Endpoints invoke the Layout Engine for auto-layout requests."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "comp-core",
      "targetId": "iface-rest",
      "tempId": "rel-core-iface",
      "documentation": "Server Core realises the REST API interface by binding the HTTP server to port 8765."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-core",
      "targetId": "comp-monitor",
      "documentation": "Server Core feeds request metrics and log entries to the Monitor UI."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "sys-http",
      "targetId": "iface-rest",
      "tempId": "rel-http-iface",
      "documentation": "Java HTTP Server provides the transport for the REST API interface."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "sys-jarchi",
      "targetId": "comp-server",
      "tempId": "rel-jarchi-server",
      "documentation": "jArchi Plugin hosts and executes the Model API Server script, providing the scripting runtime and model access globals."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "sys-graalvm",
      "targetId": "comp-server",
      "tempId": "rel-graalvm-server",
      "documentation": "GraalVM JavaScript engine executes all server JavaScript code, including Java interop calls."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-undoable",
      "targetId": "tech-display",
      "tempId": "rel-undoable-display",
      "documentation": "Undoable Commands module requires execution on the SWT Display Thread for all model mutations."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-op-queue",
      "targetId": "tech-display",
      "tempId": "rel-queue-display",
      "documentation": "Operation Queue dispatches batch execution to the SWT Display Thread via Display.timerExec."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "comp-undoable",
      "targetId": "sys-gef",
      "documentation": "Undoable Commands uses the GEF Command Stack to record and execute all model changes."
    },
    {
      "op": "createRelationship",
      "type": "composition-relationship",
      "sourceId": "dev-archi",
      "targetId": "sys-jarchi",
      "tempId": "rel-archi-jarchi",
      "documentation": "Archi Application hosts the jArchi Plugin as an Eclipse plugin component."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "node-jvm",
      "targetId": "dev-archi",
      "tempId": "rel-jvm-archi",
      "documentation": "The JVM Process hosts and runs the Archi Application."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "node-jvm",
      "targetId": "sys-http",
      "documentation": "The JVM Process provides the runtime for the Java HTTP Server."
    },
    {
      "op": "createRelationship",
      "type": "serving-relationship",
      "sourceId": "sys-swt",
      "targetId": "tech-display",
      "tempId": "rel-swt-display",
      "documentation": "Eclipse SWT provides the Display thread infrastructure used for all UI and model operations."
    },
    {
      "op": "createRelationship",
      "type": "realization-relationship",
      "sourceId": "artifact-scripts",
      "targetId": "comp-server",
      "tempId": "rel-scripts-server",
      "documentation": "Server Scripts artifact realises the Model API Server application component — the scripts ARE the implementation."
    }
  ]
}
